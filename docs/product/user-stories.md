# User Stories — MVP Chrono

## Аутентификация и профиль
**US-001 — Регистрация/вход как пользователь**  
**Как** гость, **хочу** войти через Google или email, **чтобы** быстро начать пользоваться.  
**Acceptance Criteria (AC):**
- Given гость на экране авторизации, When нажимает «Войти с Google», Then создаётся/находится учётка и выполняется вход.
- Given гость вводит email+пароль, When данные валидны, Then выполняется вход.

**US-002 — Редактирование профиля**  
**Как** пользователь, **хочу** заполнить имя, фото, краткое био и теги, **чтобы** меня находили по навыкам.  
**AC:**
- Given пользователь в настройках, When сохраняет валидные поля, Then профиль обновлён и виден в каталоге.

**US-003 — Установка цены и валюты времени**  
**Как** эксперт, **хочу** указать цену за час (в кредитах и/или офлайн-деньгах), **чтобы** покупатели понимали условия.  
**AC:**
- Given эксперт в настройках профиля, When задаёт цену и формат (кредиты/оффлайн), Then карточка профиля показывает эти параметры.

---

## Каталог и поиск
**US-010 — Поиск людей**  
**Как** покупатель, **хочу** искать по ключевым словам и тегам, **чтобы** быстро находить подходящих людей.  
**AC:**
- Given введён запрос, When нажимаю поиск, Then список фильтруется по имени/био/тегам.

**US-011 — Фильтры каталога**  
**Как** покупатель, **хочу** фильтровать по категориям/цене/доступности, **чтобы** сузить выбор.  
**AC:**
- Given включены фильтры, When применяю, Then каталог отображает только соответствующие карточки.

---

## Слоты и доступность
**US-020 — Создание слота времени**  
**Как** эксперт, **хочу** публиковать слоты (дата, длительность, цена, формат), **чтобы** меня могли бронировать.  
**AC:**
- Given форма слота, When ввёл валидные данные и нажал «Опубликовать», Then слот виден в моём профиле и каталоге.

**US-021 — Управление доступностью**  
**Как** эксперт, **хочу** добавлять/удалять слоты в календаре, **чтобы** контролировать расписание.  
**AC:**
- Given календарь, When удаляю слот без брони, Then он исчезает из списка.
- When слот уже забронирован, Then отображается ограничение и подсказка отмены через правила.

---

## Бронирование и эскроу кредитов
**US-030 — Бронирование слота за кредиты**  
**Как** покупатель, **хочу** забронировать слот и зарезервировать кредиты, **чтобы** подтвердить намерение.  
**AC:**
- Given детальная карточка слота, When жму «Забронировать», Then вижу сумму/баланс/подтверждение.
- When подтверждаю, Then кредиты резервируются (эскроу) и статус брони «Ожидает подтверждения эксперта».

**US-031 — Подтверждение/отклонение брони экспертом**  
**Как** эксперт, **хочу** подтвердить или отклонить бронь, **чтобы** управлять расписанием.  
**AC:**
- Given новая бронь «Ожидает», When эксперт подтверждает, Then статус «Подтверждено», пользователю идёт уведомление.
- When отклоняет, Then кредиты моментально возвращаются покупателю.

**US-032 — Завершение слота и списание**  
**Как** система, **хочу** по завершению слота списать зарезервированные кредиты в пользу эксперта, **чтобы** завершить расчёт.  
**AC:**
- Given бронь «Подтверждено», When наступает время окончания и не зафиксировано спора, Then эскроу списывается → эксперт получает кредиты.

**US-033 — Отмена брони (правила)**  
**Как** покупатель, **хочу** отменить бронь заранее без потерь, **чтобы** не терять кредиты; **как** эксперт, **хочу** тоже иметь окно отмены.  
**AC:**
- Given T-≥N часов до начала, When отмена, Then кредиты полностью возвращаются.
- Given T-<N, When отмена покупателем, Then удержание X% (настройка MVP можно упростить).
- When отмена экспертом, Then полный возврат покупателю.

---

## Чат
**US-040 — Чат по брони**  
**Как** покупатель/эксперт, **хочу** переписываться по конкретной брони, **чтобы** согласовать детали.  
**AC:**
- Given бронь существует, When один из участников пишет сообщение, Then второй видит его в связанной переписке и получает уведомление.

---

## Кредиты и кошелёк
**US-050 — Просмотр баланса и истории**  
**Как** пользователь, **хочу** видеть баланс кредитов и историю транзакций, **чтобы** понимать движение средств.  
**AC:**
- Given кошелёк, When открываю, Then вижу текущий баланс и журнал (+начисления/−списания/эскроу).

**US-051 — Покупка кредитов (MVP-заглушка/онлайн)**  
**Как** пользователь, **хочу** купить пакет кредитов, **чтобы** иметь возможность бронировать.  
**AC:**
- Given экран покупки, When выбираю пакет и подтверждаю, Then баланс пополняется (MVP допускает «фиктивную» оплату/заглушку).

**US-052 — Оффлайн-оплата для экспертов (витрина)**  
**Как** эксперт, **хочу** указывать, что принимаю оплату оффлайн, **чтобы** работать за деньги вне платформы.  
**AC:**
- Given профиль эксперта, When указан оффлайн-режим, Then в слоте отображается «Оплата оффлайн, без эскроу», чат активен, комиссия платформы не списывается.

---

## Уведомления
**US-060 — Уведомления о статусах**  
**Как** пользователь, **хочу** получать уведомления о подтверждении/отмене/сообщениях, **чтобы** не пропускать изменения.  
**AC:**
- Given событие (подтверждение, новый месседж, напоминание T-30), When оно происходит, Then приходит пуш/in-app уведомление.

---

## Модерация/безопасность (минимум для MVP)
**US-070 — Жалоба на пользователя/бронь**  
**Как** пользователь, **хочу** пожаловаться на некорректное поведение, **чтобы** поддерживать безопасное сообщество.  
**AC:**
- Given экран профиля/чата/броней, When нажимаю «Пожаловаться», Then отправляется тикет модерации (MVP — запись в журнал).

**US-071 — Базовая верификация**  
**Как** эксперт, **хочу** пройти простую верификацию (почта/телега), **чтобы** повысить доверие.  
**AC:**
- Given отправка кода/линка, When подтверждено, Then профиль получает бейдж «Проверенный» (для Pro-подписки в будущем).

---

## Отчёты и аналитика (минимум)
**US-080 — История бронирований**  
**Как** пользователь, **хочу** видеть список моих покупок/продаж времени, **чтобы** отслеживать активность.  
**AC:**
- Given раздел «История», When открываю, Then вижу табличку «купил/продал», суммы/кредиты, статусы.

---

# Нефункциональные требования (MVP)
- **Производительность:** каталог и профиль открываются ≤ 1.5 сек при 50мс RTT.
- **Надёжность:** никакой «потери» кредитов — все операции через транзакции; баланс = сумма транзакций.
- **Простота:** не более 3 кликов от каталога до подтверждения брони.
- **Безопасность:** доступ к чату и деталям брони только участникам брони; скрываем контакты до подтверждения (опционально).
- **Логи/аудит:** все изменение статусов брони и кредитных операций — в журнале.
